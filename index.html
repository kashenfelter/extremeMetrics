<!DOCTYPE html>
<html>
<head>
  <title>R Package Development with Literate Programming paradigm</title>

  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="generator" content="pandoc" />



  <meta name="date" content="2015-05-22" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="apple-mobile-web-app-capable" content="yes">

  <link rel="stylesheet" media="all" href="index_files/ioslides-13.5.1/fonts/fonts.css">

  <link rel="stylesheet" media="all" href="index_files/ioslides-13.5.1/theme/css/default.css">
  <link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="index_files/ioslides-13.5.1/theme/css/phone.css">

  <base target="_blank">

  <script type="text/javascript">
    var SLIDE_CONFIG = {
      // Slide settings
      settings: {
                title: 'R Package Development with Literate Programming paradigm',
                        subtitle: 'Based on <a href="http://yihui.name/rlp"><a href="http://yihui.name/rlp" class="uri">http://yihui.name/rlp</a></a>',
                useBuilds: true,
        usePrettify: true,
        enableSlideAreas: true,
        enableTouch: true,
                favIcon: 'index_files/logo.jpg',
              },

      // Author information
      presenters: [
            {
        name:  'Marcin Kosiński' ,
        company: '',
        gplus: '',
        twitter: '',
        www: '',
        github: ''
      },
            ]
    };
  </script>

  <style type="text/css">

    b, strong {
      font-weight: bold;
    }

    em {
      font-style: italic;
    }

    slides > slide {
      -webkit-transition: all 0.6s ease-in-out;
      -moz-transition: all 0.6s ease-in-out;
      -o-transition: all 0.6s ease-in-out;
      transition: all 0.6s ease-in-out;
    }

    .auto-fadein {
      -webkit-transition: opacity 0.6s ease-in;
      -webkit-transition-delay: 0.6s;
      -moz-transition: opacity 0.6s ease-in 0.6s;
      -o-transition: opacity 0.6s ease-in 0.6s;
      transition: opacity 0.6s ease-in 0.6s;
      opacity: 0;
    }

    slides > slide:not(.nobackground):before {
      font-size: 12pt;
      content: "";
      position: absolute;
      bottom: 20px;
      left: 60px;
      background: url(index_files/logo.jpg) no-repeat 0 50%;
      -webkit-background-size: 30px 30px;
      -moz-background-size: 30px 30px;
      -o-background-size: 30px 30px;
      background-size: 30px 30px;
      padding-left: 40px;
      height: 30px;
      line-height: 1.9;
    }
  </style>



</head>

<body style="opacity: 0">

<slides class="layout-widescreen">

  <slide class="title-slide segue nobackground">
        <aside class="gdbar"><img src="index_files/logo.jpg"></aside>
        <!-- The content of this hgroup is replaced programmatically through the slide_config.json. -->
    <hgroup class="auto-fadein">
      <h1 data-config-title><!-- populated from slide_config.json --></h1>
      <h2 data-config-subtitle><!-- populated from slide_config.json --></h2>
      <p data-config-presenter><!-- populated from slide_config.json --></p>
            <p style="margin-top: 6px; margin-left: -2px;">May 22, 2015</p>
          </hgroup>
  </slide>

<slide class=''><hgroup><h2>Why we should create R packages?</h2></hgroup><article  id="why-we-should-create-r-packages" class="smaller build">

<ul>
<li>You have code that you want to share with others</li>
<li>Bundling your code into a package makes it easy for other people to use it</li>
<li>If R code is in a package, any R user can easily download it, install it, and learn how to use it.</li>
</ul>

</article></slide><slide class=''><hgroup><h2>Why we should create R packages? </h2><h3> Organizing code in a package makes your life easier because packages come with conventions</h3></hgroup><article  id="why-we-should-create-r-packages-organizing-code-in-a-package-makes-your-life-easier-because-packages-come-with-conventions" class="smaller build">

<blockquote>
<p>Seriously, it doesn&#39;t have to be about sharing your code (although that is an added benefit!). It is about saving yourself time. - <a href='http://hilaryparker.com/2014/04/09/writing-an-r-package-from-scratch/' title=''>Hilary Parker</a></p>
</blockquote>

<p>Conventions are helpful because:</p>

<ul>
<li>Instead of having to think about the best way to organize a project, you can just follow a template.</li>
<li>If you buy into R&#39;s package conventions, you get many tools for free.</li>
</ul>

</article></slide><slide class='segue dark nobackground'><hgroup class = 'auto-fadein'><h2>Vignettes: Long-Form Documentation</h2></hgroup><article  id="vignettes-long-form-documentation" class="smaller build">

</article></slide><slide class=''><hgroup><h2>What is a Vignette?</h2></hgroup><article  id="what-is-a-vignette" class="smaller build">

<ul>
<li>A vignette is a long-form guide to your package.</li>
<li>A vignette is like a book chapter or an academic paper: it can describe the problem that your package is designed to solve, and then show the reader how to solve it.</li>
<li>Vignettes are also useful if you want to explain the details of your package. For example, if you have implemented a complex statistical algorithm, you might want to describe all the details in a vignette so that users of your package can understand what&#39;s going on under the hood, and be confident that you&#39;ve implemented the algorithm correctly - <strong>and the best way to show it is by using <code>rlp</code>!</strong></li>
</ul>

<blockquote>
<p><a href='http://r-pkgs.had.co.nz/' title=''>Hadley Wickham, R packages</a></p>
</blockquote>

</article></slide><slide class=''><hgroup><h2>Vignette examples</h2></hgroup><article  id="vignette-examples" class="smaller build">

<p>You can see the vignette for a specific package by using</p>

<pre class = 'prettyprint lang-r'>utils::browseVignettes(&quot;dplyr&quot;)</pre>

<p>Sometimes if a package has many vignettes they are connected into a website</p>

<p><a href='[https://github.com/pbiecek/archivist]' title=''><a href='https://github.com/pbiecek/archivist' title=''>https://github.com/pbiecek/archivist</a></a></p>

</article></slide><slide class=''><hgroup><h2><code>knitr</code> styles and templates </h2><h3> sky is the limit</h3></hgroup><article  id="knitr-styles-and-templates-sky-is-the-limit" class="smaller build">

<p><code>knitr</code> package offers a vide variety of vignettes&#39; templates</p>

<pre class = 'prettyprint lang-r'>utils::browseVignettes(&quot;knitr&quot;)</pre>

</article></slide><slide class=''><hgroup><h2>Advice for Writing Vignettes</h2></hgroup><article  id="advice-for-writing-vignettes" class="smaller build">

<blockquote>
<p>If you&#39;re thinking without writing, you only think you&#39;re thinking. - Leslie Lamport.</p>
</blockquote>

<ul>
<li>When writing a vignete, you&#39;re teaching someone how to use your package. You need to put yourself in the readers&#39; shoes, and adopt <code>beginner&#39;s mind</code>.</li>
<li>Writing a vignette also makes a nice break from coding. In my experience, writing uses a different part of the brain from programming, so if you&#39;re sick of programming, try writing for a bit.</li>
<li>A nice vignette can be a sketch of an article for <em>Journal of Statistical Software</em></li>
<li><a href='http://r-pkgs.had.co.nz/' title=''>Hadley Wickham, R packages</a></li>
</ul>

</article></slide><slide class='segue dark nobackground'><hgroup class = 'auto-fadein'><h2>Literate Programming</h2></hgroup><article  id="literate-programming" class="smaller build">

</article></slide><slide class=''><hgroup><h2>What is a Literate Programming paradigm?</h2></hgroup><article  id="what-is-a-literate-programming-paradigm" class="smaller ">

<ul>
<li><p>Literate programming is an approach to programming introduced by Donald Knuth in which a program is given as an explanation of the program logic in a natural language, such as English, interspersed with snippets of macros and traditional source code, from which a compilable source code can be generated.</p></li>
<li><p>Interestingly, the most popular application of the LP paradigm seems to be documenting software (using a special form of comments) for users instead of “programming” for authors. In other words, we use LP to document the usage of software, instead of documenting the source code.</p></li>
<li><p><strong>In literate programming code is embedded in documentation, with the code following the structure of the documentation.</strong></p></li>
</ul>

</article></slide><slide class=''><hgroup><h2>Advantages of LP</h2></hgroup><article  id="advantages-of-lp" class="smaller ">

<p>LP has at least two advantages: <a href='http://yihui.name/rlp/' title=''><a href='http://yihui.name/rlp/' title=''>http://yihui.name/rlp/</a></a></p>

<ol>
<li>You can write much more extensive and richer documentation than you normally could do with comments. In general, comments in code are (or should be) brief and limited to plain text. Normally you will not write five paragraphs of comments to explain a few lines of code, and you cannot write readable2 math expressions or embed a video in comments.</li>
<li>You can label code chunks and reference/reuse them using the labels, which allows you to compose your program flexibly using different pieces of code chunks. For example, you can define and explain a code chunk later in the document, but insert it in a previous code chunk using its label. This feature has been emphasized by Knuth, but I do not see it is widely adopted for some reason. Perhaps most people are more comfortable with designing a big program by smaller units like functions instead of code chunks, which is actually a good idea</li>
</ol>

</article></slide><slide class=''><hgroup><h2>An LP-vignette example</h2></hgroup><article  id="an-lp-vignette-example" class="smaller ">

<p><a href='http://yihui.name/rlp/' title=''>http://yihui.name/rlp/</a></p>

</article></slide><slide class='segue dark nobackground'><hgroup class = 'auto-fadein'><h2>An LP way of creating a package in R with <code>rlp</code></h2></hgroup><article  id="an-lp-way-of-creating-a-package-in-r-with-rlp" class="smaller ">

</article></slide><slide class=''><hgroup><h2>Necessary packages</h2></hgroup><article  id="necessary-packages" class="smaller ">

<pre class = 'prettyprint lang-r'>install.packages(
  c(&quot;roxygen2&quot;, &quot;Rd2roxygen&quot;, &quot;rlp&quot;)
)
devtools::install_github(&quot;yihui/rlp&quot;)
update.packages(
  type = &quot;source&quot;,
  repos = &quot;http://yihui.name/xran&quot;)
)</pre>

</article></slide><slide class=''><hgroup><h2>Necessary files</h2></hgroup><article  id="necessary-files" class="smaller ">

<p><code>Makefile</code></p>

<pre class = 'prettyprint lang-r'>purl=Rscript -e &quot;knitr::purl(&#39;$(1)&#39;, &#39;$(2)&#39;, quiet=TRUE, documentation=0)&quot;

rfiles:=$(patsubst vignettes/LP-%.Rmd,R/%-GEN.R,$(wildcard vignettes/LP-*.Rmd))

all: $(rfiles)

R/%-GEN.R: vignettes/LP-%.Rmd
    $(call purl,$^,$@)</pre>

</article></slide><slide class=''><hgroup><h2>Necessary ninja hacks</h2></hgroup><article  id="necessary-ninja-hacks" class="smaller ">

<p>Now we have three things to do to fully build this package:</p>

<ol>
<li>Run make to generate R source code to <code>R/</code>;</li>
<li>Run <code>roxygen2</code> to generate R documentation to <code>man/</code>, <code>NAMESPACE</code>, and other stuff;</li>
<li>Run <code>R CMD build</code> to build the package as well as the vignettes.</li>
</ol>

<p><strong>Want to do this in 1 click?</strong></p>

<p>Yihui Xie: <code>I have been secretly hacking the Build &amp; Reload button in my RStudio IDE for a long time</code>.</p>

<p>If you open RStudio, and go to <code>Tools</code> -&gt; <code>Project Options</code> -&gt; <code>Build Tools</code>, you will need to specify a weird configuration:</p>

<pre class = 'prettyprint lang-r'>-v &amp;&amp; Rscript -e &quot;Rd2roxygen::rab(install=TRUE, before=system(&#39;make&#39;))&quot;</pre>

</article></slide><slide class='segue dark nobackground'><hgroup class = 'auto-fadein'><h2>Let&#39;s practise!</h2></hgroup><article  id="lets-practise" class="smaller ">

</article></slide><slide class=''><hgroup><h2><code>extremeMetrics</code> package</h2></hgroup><article  id="extrememetrics-package" class="smaller ">

<p>Let&#39;s practise LP-like package development on <a href='https://github.com/mi2-warsaw' title=''><code>extremeMetrics</code> package</a> which is an <code>Extreme and incredibly crazy set of metrics</code>.</p>

<ol>
<li>Using LP-paradigm, write an <code>LP-*.Rmd</code> file in <code>vignettes</code> directory with an implementation of an incredibly crazy metric function. The more <code>LaTeX</code> code, plots and images - the better!</li>
<li>Explain your code in detail. Let everybody know how extraordinary metric you have invented.</li>
</ol></article></slide>


  <slide class="backdrop"></slide>

</slides>

<script src="index_files/ioslides-13.5.1/js/modernizr.custom.45394.js"></script>
<script src="index_files/ioslides-13.5.1/js/prettify/prettify.js"></script>
<script src="index_files/ioslides-13.5.1/js/prettify/lang-r.js"></script>
<script src="index_files/ioslides-13.5.1/js/prettify/lang-yaml.js"></script>
<script src="index_files/ioslides-13.5.1/js/hammer.js"></script>
<script src="index_files/ioslides-13.5.1/js/slide-controller.js"></script>
<script src="index_files/ioslides-13.5.1/js/slide-deck.js"></script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "index_files/mathjax-local/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

<!-- map slide visiblity events into shiny -->
<script>
  (function() {
    if (window.jQuery) {
       window.jQuery(document).on('slideleave', function(e) {
         window.jQuery(e.target).trigger('hidden');
      });
       window.jQuery(document).on('slideenter', function(e) {
         window.jQuery(e.target).trigger('shown');
      });
    }
  })();
</script>

</body>
</html>
